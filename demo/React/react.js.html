<html>
<head>
<meta charset="UTF-8" />
<style>
*{
	padding:0;
	margin:0;
}
.warning{
	background:red;
	color:blue;
	text-align:center;
}
</style>
<!--<script src="https://cdn.staticfile.org/react/15.4.2/react.min.js"></script>
	<script src="https://cdn.staticfile.org/react/15.4.2/react-dom.min.js"></script>
	<script src="https://cdn.staticfile.org/babel-standalone/6.22.1/babel.min.js"></script>-->
<script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>

<script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
<script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
<script src="https://cdn.staticfile.org/jquery/2.1.4/jquery.min.js"></script>
<!--第五章换包-->
</head>
<body>
	<div id="example"></div>
	<!-- {/**/}注释-->
	<script type="text/babel">
		/*const element = <h1>Hello,world</h1>
componentWillMount 在渲染前调用,在客户端也在服务端。

componentDidMount : 在第一次渲染后调用，只在客户端。之后组件已经生成了对应的DOM结构，可以通过this.getDOMNode()来进行访问。 如果你想和其他JavaScript框架一起使用，可以在这个方法中调用setTimeout, setInterval或者发送AJAX请求等操作(防止异步操作阻塞UI)。

componentWillReceiveProps 在组件接收到一个新的 prop (更新后)时被调用。这个方法在初始化render时不会被调用。

shouldComponentUpdate 返回一个布尔值。在组件接收到新的props或者state时被调用。在初始化时或者使用forceUpdate时不被调用。
可以在你确认不需要更新组件时使用。

componentWillUpdate在组件接收到新的props或者state但还没有render时被调用。在初始化时不会被调用。

componentDidUpdate 在组件完成更新后立即调用。在初始化时不会被调用。

componentWillUnmount在组件从 DOM 中移除之前立刻被调用。

		ReactDOM.render(
			element,
			document.getElementById("example")
		)
		function Clock(props){
			return (
				<div><h1>hello,world</h1>
				<h2>现在是{props.date.toLocaleTimeString()}</h2>
				</div>
			);
		}
		
		function tick(){
			const element = (
			<div><h1>hello,react</h1>
				<h2>{new Date().toLocaleTimeString()}</h2>
			</div>
			)
			ReactDOM.render(
				//<Clock date={new Date()} />,
				element,
				document.getElementById("example")
			)
		}
		
		
		class Clock extends React.Component{
			render(){
				return(
					<div>
						<h1>hi,react</h1>
						<h2>现在是{this.props.date.toLocaleTimeString()}</h2>
					</div>
				);
			}
		}
		function tick(){
			ReactDOM.render(
				<Clock date={new Date()} />,
				document.getElementById("example")
			)
		}
		setInterval(tick,1000);
	
		const element = <h1 className="foo">2.1</h1>
		ReactDOM.render(
			element,
			document.getElementById("example")
		)
		
		ReactDOM.render(
			<div><h1>2.2</h1><h2>2.2</h2><p>2.2</p></div>,
			document.getElementById("example")
		)
		var i =1;
		ReactDOM.render(
			//<div><h1>2.3</h1><h2>{1+1}</h2></div>,
			<div><h3>{i==1? 'True' : 'False'}</h3></div>,
			document.getElementById("example")
		)
		 
		var mystyle = {fontSize : 100,color:"#FF0000"};
		ReactDOM.render(
			<h1 style={mystyle}>2.4</h1>,
			document.getElementById("example")
		)

		ReactDOM.render(
			<div><h1>2.5</h1></div>,
			document.getElementById("example")
		)

		var arr = [
			<h1>2.6</h1>,
			<h2>hhh</h2>
			]
		ReactDOM.render(
			<div>{arr}</div>,
			document.getElementById("example")
		)

		function Helmsa(props){
			return <h1>3.1</h1>;
		}
		const element = <Helmsa />;
		ReactDOM.render(
			element,
			document.getElementById("example")
		)

		function Helmsg(props){
			return <h1>3.2 {props.name}</h1>
		}
		const element = <Helmsg name="cmy" />
		ReactDOM.render(
			element,
			document.getElementById("example")
		)

		function Name(props){
			return <h1>name : {props.name}</h1>
		}
		function Sex(props){
			return <h2>sex : {props.sex}</h2>
		}
		function Age(props){
			return <h2>age : {props.age}</h2>
		}
		function Person(){
			return (
				<div>
					<Name name = "cmy"/>
					<Sex sex = "man" />
					<Age age = "21" />
				</div>
			);
		}
		ReactDOM.render(
			<Person />,
			document.getElementById("example")
		)

		class Clock extends React.Component{						constructor(props){
				super(props);
				this.state = {date: new Date()};
			}
			render(){
				return(
					<div><h1>4.1</h1>
					<h2>现在是{this.state.date.toLocaleTimeString()}</h2>
					</div>
				);
			}
		}
		ReactDOM.render(
			<Clock />,
			document.getElementById("example")
		)

		class Clock extends React.Component{
			constructor(props){
				super(props);
				this.state = {date: new Date()};
			}
			componentDidMount(){
				this.timerID = setInterval(
				() =>this.tick(),1000
				);
			}
			componentWillUnmount(){
				clearInterval(this.timerID);
			}
			tick(){
				this.setState({
					date:new Date()
				})
			}
			render(){
				return(
					<div>
						<h1>4.2</h1><h2>现在是{this.state.date.toLocaleTimeString()}</h2>
					</div>
				);
			}
		}
		ReactDOM.render(
			<Clock />,
			document.getElementById("example")
		)
		
		function FormattedDate(props){
			return <h2>now is {props.date.toLocaleTimeString()}</h2>;
		}
		class Clock extends React.Component{
			constructor(props){
				super(props);
				this.state = {date: new Date()};
			}
			componentDidMount(){
				this.timerID = setInterval(
				() => this.tick(),1000
				);
			}
			componentWillUnmount(){
				clearInterval(this.timerID);
			}
			tick(){
				this.setState({
					date : new Date()
				});
			}
			render(){
				return(
					<div><h1>4.3</h1><FormattedDate date = {this.state.date}/></div>
				)
			}
		}
		ReactDOM.render(
			<Clock />,
			document.getElementById("example")
		)

		function FormattedDate1(props){
			return <h2>now is {props.date.toLocaleTimeString()}</h2>;
		}
		class Clock extends React.Component{
			constructor(props){
				super(props);
				this.state = {date : new Date()};
			}
			componentDidMount(){
				this.timer = setInterval(
				() => this.tick(),1000
				);
			}
			componentWillUnmount(){
				clearInterval(this.timer);
			}
			tick(){
				this.setState({
					date : new Date()
				});
			}
			render(){
				return (
					<div>
					<h1>4.4</h1>
					<FormattedDate1 date = {this.state.date}/></div>
				);
			}
		}
		function App(){
			return (
				<div><Clock /><Clock /></div>
			)
		}
		ReactDOM.render(
			<App />,
			document.getElementById("example")
		)

		function Helmsg(props){
			return <h1>5.1{props.name}</h1>
		}
		const element = <Helmsg name = "happy" />
		ReactDOM.render(
			element,
			document.getElementById("example")
		)

		class Clock extends React.Component{
			render(){
				return(
					<div>
					<h1>5.2</h1><h2>{this.props.name}</h2>
					</div>
				)
			}
		}
		ReactDOM.render(
			<Clock name = "qwe" />,
			document.getElementById("example")
		)

		class Clock extends React.Component{
			render(){
				return(
					<div>
					<h1>5.3</h1><h2>{this.props.name}</h2>
					</div>
				);
			}
		}
		Clock.defaultProps = {
			name : "asd"
		};
		const element = <Clock />;
		
		ReactDOM.render(
			element,
			document.getElementById("example")
		)

		class Website extends React.Component{
			constructor(){
				super();
			
				this.state = {
					name : 'cmy',
					site:"http://www.baidu.com"
				}
			}
			render(){
				return(
					<div>
					<Name name = {this.state.name}/>
					<Link site = {this.state.site} />
					</div>
				);
			}
		}
		class Name extends React.Component{
			render(){
				return (
					<h1>{this.props.name}</h1>
				);
			}
		}
		class Link extends React.Component{
			render(){
				return (
					<a href={this.props.site}>{this.props.site}</a>
				);
			}
		}
		ReactDOM.render(
			<Website />,
			document.getElementById("example")
		)
		
		var title = "prop yz";
		class Mytitle extends React.Component{
			render(){
				return(
					<h1>5.4 {this.props.title}</h1>
				);
			}
		}
		
		ReactDOM.render(
			<Mytitle title ={title}/>,
			document.getElementById("example")
		)
		
		var title = "prop yz2"
		var Mytitle = React.createClass({
			propTypes: {
       				 title: React.PropTypes.string.isRequired,
     			 },
			render:function(){
				return <h1>5.4.2 {this.props.title}</h1>
			}
		});
		ReactDOM.render(
			<Mytitle title = {title}/>,
			document.getElementById("example")
		)

		class Toggle extends React.Component{
			constructor(props){
				super(props);
				this.state = {isToggleOn:true};
				this.handleClick = this.handleClick.bind(this);
			}
			handleClick(){
				this.setState(prevState =>({
					isToggleOn : !prevState.isToggleOn
				}));
			}
			render(){
				return (
					<button onClick = {this.handleClick}>{this.state.isToggleOn ? "ON" : "OFF"}</button>	
				);
			}
		}
		ReactDOM.render(
			<Toggle />,
			document.getElementById("example")
		)

		function UserGreeting(props){
			return <h1>welcome back!</h1>;
		}
		function GuestGreeting(props){
			return <h1>please register</h1>;
		}
		function Greeting(props){
			const isLoggedIn = props.isLoggedIn;
			if(isLoggedIn){
				return <UserGreeting />;
			}
			return <GuestGreeting />;		
		}
		ReactDOM.render(
			<Greeting isLoggedIn = {false}/>,
			document.getElementById("example")
		)
		class LoginControl extends React.Component{
			constructor(props){
				super(props);
				this.handleLoginClick = this.handleLoginClick.bind(this);
				this.handleLogoutClick = this.handleLogoutClick.bind(this);
				this.state = {isLoggedIn: false};
			}
			handleLoginClick(){
				this.setState({isLoggedIn:true});
			}
			handleLogoutClick(){
				this.setState({isLoggedIn: false});	
			}
			render(){
				
					const isLoggedIn = this.state.isLoggedIn;
					let button;
					if(isLoggedIn){
						button = <LogoutButton onClick={this.handleLogoutClick} />;
					}else{
						button = <LoginButton onClick={this.handleLoginClick} />;		
					}
				return (
					<div><Greeting isLoggedIn = {isLoggedIn} />{button}</div>
				);
			}
		}
		function UserGreeting(props){
			return <h1>welcome back</h1>;
		}
		function GuestGreeting(props){
			return <h1>go register</h1>
		}
		function Greeting(props){
			const isLoggedIn = props.isLoggedIn;
			if(isLoggedIn){
				return <UserGreeting />;
			}
			return <GuestGreeting />;
		}
		function LoginButton(props){
			return(
				<button onClick={props.onClick}>login</button>
			);
		}
		function LogoutButton(props){
			return(
				<button onClick={props.onClick}>logout</button>
			);
		}
		ReactDOM.render(
			<LoginControl />,
			document.getElementById("example")
		)
		
		function Mailbox(props){
			const unreadMessages = props.unreadMessages;
			return (
				<div>
					<h1>Hello, now is </h1>
					{unreadMessages.length > 0 &&
					<h2>您有{unreadMessages.length}条未读信息</h2>
					}
				</div>
			);
		}
		const message = ["React","re: React","Re:Re: React"];
		ReactDOM.render(
			<Mailbox unreadMessages={message} />,
			document.getElementById("example")	
		)

		function WarningBanner(props){
			if(!props.warn){
				return null;
			}
			return (
				<div className = "warning">警告</div>
			);
		}
		class Page extends React.Component{
			constructor(props){
				super(props);
				this.state = {showWarning:true}
				this.handleToggleClick = this.handleToggleClick.bind(this);
			}
			handleToggleClick(){
				this.setState(prevState => ({
					showWarning: !prevState.showWarning
				}));
			}
			render(){
				return (
					<div>
					<WarningBanner warn={this.state.showWarning} /><button onClick={this.handleToggleClick}>{this.state.showWarning ? '隐藏' : "显示"}</button>
					</div>
				)
			}
		}
		ReactDOM.render(
			<Page />,
			document.getElementById("example")
		)

		const numbers=[1,2,3,4,5];
		const listItems = numbers.map((numbers) => 
			<li>{numbers}</li>
		)
		ReactDOM.render(
			<ul>{listItems}</ul>,
			document.getElementById("example")
		)

		function NumberList(props) {
			const numbers = props.numbers;
			const listItems = numbers.map((number) => 
				<li key={number.toString()}>{number}</li>
			);
			return (
				<ul>{listItems}</ul>
			);
		}
		const numbers = [1,2,3,4,5];
		ReactDOM.render(
			<NumberList numbers={numbers}/>,
			document.getElementById("example")
		)

		function ListItem(props){
			return <li>{props.value}</li>;
		}
		function NumberList(props){
			const numbers = props.numbers;
			const listItems = numbers.map((number) => 
				<ListItem key={number.toString()} value={number} />
			);
			return (
				<ul>{listItems}</ul>
			)
		}
		const numbers =[1,2,3,4,5]
		ReactDOM.render(
			<NumberList numbers = {numbers}/>,
			document.getElementById("example")
		) 

		function Blog(props){
			const sidebar = (
				<ul>{props.posts.map((post)=>
					<li key={post.id}>{post.title}</li>
				)}</ul>
			);
			const content = props.posts.map((post)=>
				<div key={post.id}>
				<h3>{post.title}</h3><p>{post.content}</p>
				</div>
			);
			return (
				<div>{sidebar}<hr />{content}</div>
			);
		}
		const posts = [{id:1,title:"Hello World",content:"Welcome to learning React!"},{id:2,title:"Insta",content:"You can install"}];
		ReactDOM.render(
			<Blog posts={posts} />,
			document.getElementById("example")
		)

		function ListItem(props){
			return <li>{props.value}</li>;
		}
		function NumberList(props){
			const numbers = props.numbers;
			return (
				<ul>
				{numbers.map((number)=>
					<ListItem key = {number.toString()} value = {number} />
				)}
				</ul>
			);
		}
		const numbers = [1,2,3,4,5]
		ReactDOM.render(
			<NumberList numbers={numbers} />,
			document.getElementById("example")
		)

		class Counter extends React.Component{
			constructor(props){
				super(props);
				this.state = {clickCount:0};
				this.handleClick = this.handleClick.bind(this);
			}
			handleClick(){
				this.setState(function(state){
					return {clickCount : state.clickCount+1};
				})
			}
			render(){
				return(
					<h2 onClick={this.handleClick}>click me!count is {this.state.clickCount}</h2>
				);
			}
		}
		ReactDOM.render(
			<Counter />,
			document.getElementById("example")
		)
		class Free extends React.Component{
			constructor(props){
				super(props);
				this.state = {opacity:1.0};
			}
			componentDidMount(){
				this.timer = setInterval(function(){
					var opacity = this.state.opacity;
					opacity -= .05;
					if(opacity<0.1){
						opacity = 1.0;
					}
					this.setState({
						opacity:opacity
					});
				}.bind(this),100);
			}
			render(){
				return (
					<div style={{opacity:this.state.opacity}}>Hello {this.props.name}</div>
				)
			}
		}
		ReactDOM.render(
			<Free name="everybody"/>,
			document.getElementById("example")
		)

		class Button extends React.Component{
			constructor(props){
				super(props);
				this.state = {data:0};
				this.setNewNumber = this.setNewNumber.bind(this);
			}
			setNewNumber(){
				this.setState({data:this.state.data+1})
			}
			render(){
				return (
					<div>
					<button onClick={this.setNewNumber}>increment</button><Content myNumber ={this.state.data} />
					</div>
				)
		
			}
		}
		class Content extends React.Component{
			componentWillMount(){
				console.log("Component WILL MOUNT");
			}
			componentDidMount(){
				console.log("Component DID MOUNT");
			}
			componentWillReceiveProps(newProps){
				console.log("Component WILL RECEIVE PROPS");
			}
			shouldComponentUpdate(newProps, newState){
				return true;
			}
			componentWillUpdate(nextProps, nextState){
				console.log("component WILL UPDATE");
			}
			componentDidUpdate(prevProps, prevState){
				console.log("component DID UPDATE");
			}
			componentWillUnmount(){
				console.log("Component WILL UNMOUNT");
			}
			render(){
				return (
					<div><h3>{this.props.myNumber}</h3></div>
				);
			}
		}
		ReactDOM.render(
			<Button />,
			document.getElementById("example")
		)

		class Usergist extends React.Component{
			constructor(props){
				super(props);
				this.state = {username:"",lastgisturl:""};
			}
			componentDidMount(){
				this.serverRequest = $.get(this.props.source,function(result){
				var lastgist = result[0];
				this.setState({
					username:lastgist.owner.login,
					lastgisturl:lastgist.html_url
				});
}.bind(this));
			}
			componentWillUnmount(){
				this.serverRequest.abort();
			}
			render(){
				return(
					<div>{this.state.username}new gist url <a href={this.state.lastgisturl}>{this.state.lastgisturl}</a></div>
				);
			}
		}
		ReactDOM.render(
			<Usergist source="https://api.github.com/users/octocat/gists"/>,
			document.getElementById("example")
		)

		class Content extends React.Component{
			render(){
				return(
					<div><input type="text" value={this.props.mydatapro} onChange={this.props.updateStateProp}/>
					<h4>{this.props.mydatapro}</h4>
					</div>
				);
			}
		}
		class Helmsg extends React.Component{
			constructor(props){
				super(props);
				this.state = {value:"hi react"};
				this.handleChange = this.handleChange.bind(this)
			}
			handleChange(event){
				this.setState({
					value:event.target.value
				});
			}
			render(){
				return (
					<div><Content mydatapro={this.state.value} updateStateProp={this.handleChange}/></div>
				);
			}
		}
		ReactDOM.render(
			<Helmsg />,
			document.getElementById("example")
		)

		var Content = React.createClass({
			render: function(){
				return <div>
					<input tyep ="text" value = {this.props.mydataprop} onChange={this.props.updatestateprop}/><h4>{this.props.mydataprop}</h4>
					</div>
			}
		})
		var Helmsg = React.createClass({
			getInitialState:function(){
				return {value:"hi everyone"};
			},
			handleChange: function(event){
				this.setState({value:event.target.value});
			},
			render:function(){
				return <div><Content mydataprop={this.state.value}
 updatestateprop={this.handleChange}/></div>
			}
		})
		ReactDOM.render(
			<Helmsg/>,
			document.getElementById("example")
		)

		class Flavorform extends React.Component{
			constructor(props){
				super(props);
				this.state = {value : "cocount"};
				this.handleChange = this.handleChange.bind(this);
				this.handleSubmit = this.handleSubmit.bind(this);
			}
			handleChange(event){
				this.setState({
					value:event.target.value
				});
				//console.log(event.target.value)
			}
			handleSubmit(event){
				alert("Your favorite flavor is:"+this.state.value);
				//取消默认动作
				event.preventDefault();
			}
			render(){
				return(
					<form onSubmit={this.handleSubmit}><label>select you like site<select value={this.state.value} onChange={this.handleChange}><option value="gg">google</option><option value="rn">runoob</option><option value="tb">taobao</option><option value="fb">facebook</option></select></label><input type="submit" value="提交"/></form>
				);
			}
		}
		ReactDOM.render(
			<Flavorform />,
			document.getElementById("example")
		)

		class Reservation extends React.Component{
			constructor(props){
				super(props);
				this.state = {
					isGoing:true,
					numberOfGuests:2
				};
				this.handleInputChange = this.handleInputChange.bind(this);
			}
			handleInputChange(event){
				const target = event.target;	
				const value = target.type==='checkbox' ? target.checked : target.value;
				const name = target.name;
				this.setState({
					[name]:value
				})
			}
			render(){
				return (
					<form><label>is or not get up : <input name="isGoing" type="checkbox" checked={this.state.isGoing} onChange={this.handleInputChange}/></label><br/>
<label>people number : <input name="numberOfGuests" type="number" value ={this.state.numberOfGuests} onChange={this.handleInputChange}/></label></form>
				);
			}
		}
		ReactDOM.render(
			<Reservation />,
			document.getElementById("example")
		)

		class Helmsg extends React.Component{
			constructor(props){
				super(props);
				this.state = {value: "cmy hay"};
				this.handleChange = this.handleChange.bind(this);
			}
			handleChange(event){
				this.setState({
					value : "what"
				})
			}
			render(){
				return (
					<div><button onClick={this.handleChange}>click me</button><h4>{this.state.value}</h4></div>
				)
			}
		}
		ReactDOM.render(
			<Helmsg />,
			document.getElementById("example")
		)

		class Content extends React.Component{
			render(){
				return (
					<div><button  onClick={this.props.updatestateprop}>click me</button><h4>{this.props.mydataprop}</h4></div>
				);
			}
		}
		class Helmsg extends React.Component{
			constructor(props){
				super(props);
				this.state = {value:"msg"};
				this.handleChange = this.handleChange.bind(this);
			}
			handleChange(event){
				this.setState({
					value:"host"
				})
			}
			render(){
				return (
					<div><Content updatestateprop={this.handleChange} mydataprop={this.state.value}></Content></div>
				);
			}
		}
		ReactDOM.render(
			<Helmsg />,
			document.getElementById("example")
		)*/

		class Mycomponent extends React.Component{
			handleClick(){
				this.refs.myInput.focus();
			}
			render(){
				return (
					<div>
					<input type ="text" ref="myInput"/>
					<input type ="button" value="click me" onClick={this.handleClick.bind(this)}/>
					</div>
				)
			}
		}
		ReactDOM.render(
			<Mycomponent />,
			document.getElementById("example")
		)
	</script>
</body>
</html>